<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>HasManyAssociationsTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            HasManyAssociationsTest 
            
                <span class="parent">&lt; 
                    
                    Test::Unit::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/rails/activerecord/test/associations_test_rb.html">rails/activerecord/test/associations_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-before_destroy">before_destroy</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-force_signal37_to_load_all_clients_of_firm">force_signal37_to_load_all_clients_of_firm</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup">setup</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_adding">test_adding</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_a_collection">test_adding_a_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_a_mismatch_class">test_adding_a_mismatch_class</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_array_and_collection">test_adding_array_and_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_before_save">test_adding_before_save</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_using_create">test_adding_using_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_assign_ids">test_assign_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_assign_ids_ignoring_blanks">test_assign_ids_ignoring_blanks</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_belongs_to_sanity">test_belongs_to_sanity</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build">test_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build_many">test_build_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build_without_loading_association">test_build_without_loading_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_clearing_a_dependent_association_collection">test_clearing_a_dependent_association_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_clearing_an_association_collection">test_clearing_an_association_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_clearing_an_exclusively_dependent_association_collection">test_clearing_an_exclusively_dependent_association_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_clearing_without_initial_access">test_clearing_without_initial_access</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_counting">test_counting</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_counting_non_existant_items_using_sql">test_counting_non_existant_items_using_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_counting_using_sql">test_counting_using_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_counting_with_column_name_and_hash">test_counting_with_column_name_and_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_counting_with_counter_sql">test_counting_with_counter_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_counting_with_single_conditions">test_counting_with_single_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_counting_with_single_hash">test_counting_with_single_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create">test_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_many">test_create_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_without_loading_association">test_create_without_loading_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all">test_delete_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all_with_not_yet_loaded_association_collection">test_delete_all_with_not_yet_loaded_association_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting">test_deleting</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_a_collection">test_deleting_a_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_a_item_which_is_not_in_the_collection">test_deleting_a_item_which_is_not_in_the_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_before_save">test_deleting_before_save</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_self_type_mismatch">test_deleting_self_type_mismatch</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_type_mismatch">test_deleting_type_mismatch</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dependence">test_dependence</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dependence_on_account">test_dependence_on_account</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dependence_with_transaction_support_on_failure">test_dependence_with_transaction_support_on_failure</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_depends_and_nullify">test_depends_and_nullify</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroy_all">test_destroy_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroy_dependent_when_deleted_from_association">test_destroy_dependent_when_deleted_from_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all">test_find_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_sanitized">test_find_all_sanitized</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_without_conditions">test_find_all_without_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_first">test_find_first</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_first_sanitized">test_find_first_sanitized</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_grouped">test_find_grouped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_ids">test_find_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_collection">test_find_in_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_many_with_merged_options">test_find_many_with_merged_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_create">test_find_or_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding">test_finding</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_default_orders">test_finding_default_orders</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_using_sql">test_finding_using_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_condition">test_finding_with_condition</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_condition_hash">test_finding_with_condition_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_different_class_name_and_order">test_finding_with_different_class_name_and_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_foreign_key">test_finding_with_foreign_key</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_get_ids">test_get_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_included_in_collection">test_included_in_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_invalid_adding">test_invalid_adding</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_invalid_adding_before_save">test_invalid_adding_before_save</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_invalid_build">test_invalid_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_regular_create_on_has_many_when_parent_is_new_raises">test_regular_create_on_has_many_when_parent_is_new_raises</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_on_new_object">test_replace_on_new_object</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_with_less">test_replace_with_less</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_with_new">test_replace_with_new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_three_levels_of_dependence">test_three_levels_of_dependence</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_triple_equality">test_triple_equality</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-before_destroy">
            
              <a name="method-i-before_destroy"></a><b>before_destroy</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-before_destroy_source')" id="l_method-i-before_destroy_source">show</a>
                
              </p>
              <div id="method-i-before_destroy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 915</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_destroy</span>() <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Trigger rollback&quot;</span> <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-force_signal37_to_load_all_clients_of_firm">
            
              <a name="method-i-force_signal37_to_load_all_clients_of_firm"></a><b>force_signal37_to_load_all_clients_of_firm</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-force_signal37_to_load_all_clients_of_firm_source')" id="l_method-i-force_signal37_to_load_all_clients_of_firm_source">show</a>
                
              </p>
              <div id="method-i-force_signal37_to_load_all_clients_of_firm_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 426</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup">
            
              <a name="method-i-setup"></a><b>setup</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_source')" id="l_method-i-setup_source">show</a>
                
              </p>
              <div id="method-i-setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 422</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>
  <span class="ruby-constant">Client</span>.<span class="ruby-identifier">destroyed_client_ids</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding">
            
              <a name="method-i-test_adding"></a><b>test_adding</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_source')" id="l_method-i-test_adding_source">show</a>
                
              </p>
              <div id="method-i-test_adding_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 592</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">natural</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Natural Company&quot;</span>)
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">natural</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># checking via the collection</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span> <span class="ruby-comment"># checking using the db</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">natural</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_a_collection">
            
              <a name="method-i-test_adding_a_collection"></a><b>test_adding_a_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_a_collection_source')" id="l_method-i-test_adding_a_collection_source">show</a>
                
              </p>
              <div id="method-i-test_adding_a_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 622</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_a_collection</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Natural Company&quot;</span>), <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Apple&quot;</span>)])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_a_mismatch_class">
            
              <a name="method-i-test_adding_a_mismatch_class"></a><b>test_adding_a_mismatch_class</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_a_mismatch_class_source')" id="l_method-i-test_adding_a_mismatch_class_source">show</a>
                
              </p>
              <div id="method-i-test_adding_a_mismatch_class_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 616</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_a_mismatch_class</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">nil</span> }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_array_and_collection">
            
              <a name="method-i-test_adding_array_and_collection"></a><b>test_adding_array_and_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_array_and_collection_source')" id="l_method-i-test_adding_array_and_collection_source">show</a>
                
              </p>
              <div id="method-i-test_adding_array_and_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 948</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_array_and_collection</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>).<span class="ruby-identifier">last</span>.<span class="ruby-identifier">clients</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_before_save">
            
              <a name="method-i-test_adding_before_save"></a><b>test_adding_before_save</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_before_save_source')" id="l_method-i-test_adding_before_save_source">show</a>
                
              </p>
              <div id="method-i-test_adding_before_save_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 629</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_before_save</span>
  <span class="ruby-identifier">no_of_firms</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">no_of_clients</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">new_firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;A New Firm, Inc&quot;</span>)
  <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">push</span> <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Natural Company&quot;</span>)
  <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">c</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Apple&quot;</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_firms</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">count</span>      <span class="ruby-comment"># Firm was not saved to database.</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_clients</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">count</span>  <span class="ruby-comment"># Clients were not saved to database.</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_firm</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">firm</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_firms</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">count</span>      <span class="ruby-comment"># Firm was saved to database.</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_clients</span><span class="ruby-operator">+</span><span class="ruby-number">2</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">count</span>  <span class="ruby-comment"># Clients were saved to database.</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_using_create">
            
              <a name="method-i-test_adding_using_create"></a><b>test_adding_using_create</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_using_create_source')" id="l_method-i-test_adding_using_create_source">show</a>
                
              </p>
              <div id="method-i-test_adding_using_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 601</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_using_create</span>
  <span class="ruby-identifier">first_firm</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">first_firm</span>.<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">natural</span> = <span class="ruby-identifier">first_firm</span>.<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Natural Company&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">first_firm</span>.<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">first_firm</span>.<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_assign_ids">
            
              <a name="method-i-test_assign_ids"></a><b>test_assign_ids</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_assign_ids_source')" id="l_method-i-test_assign_ids_source">show</a>
                
              </p>
              <div id="method-i-test_assign_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 989</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_assign_ids</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Apple&quot;</span>)
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">client_ids</span> = [<span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_client</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>).<span class="ruby-identifier">id</span>]
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_assign_ids_ignoring_blanks">
            
              <a name="method-i-test_assign_ids_ignoring_blanks"></a><b>test_assign_ids_ignoring_blanks</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_assign_ids_ignoring_blanks_source')" id="l_method-i-test_assign_ids_ignoring_blanks_source">show</a>
                
              </p>
              <div id="method-i-test_assign_ids_ignoring_blanks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 998</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_assign_ids_ignoring_blanks</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Apple&quot;</span>)
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">client_ids</span> = [<span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_client</span>).<span class="ruby-identifier">id</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>).<span class="ruby-identifier">id</span>, <span class="ruby-string">''</span>]
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_belongs_to_sanity">
            
              <a name="method-i-test_belongs_to_sanity"></a><b>test_belongs_to_sanity</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_belongs_to_sanity_source')" id="l_method-i-test_belongs_to_sanity_source">show</a>
                
              </p>
              <div id="method-i-test_belongs_to_sanity_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 505</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_belongs_to_sanity</span>
  <span class="ruby-identifier">c</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">firm</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">firm</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-keyword">false</span>, <span class="ruby-string">&quot;belongs_to failed if check&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">firm</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-keyword">false</span>,  <span class="ruby-string">&quot;belongs_to failed unless check&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build">
            
              <a name="method-i-test_build"></a><b>test_build</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_source')" id="l_method-i-test_build_source">show</a>
                
              </p>
              <div id="method-i-test_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 672</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build</span>
  <span class="ruby-identifier">new_client</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">build</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Another Client&quot;</span>, <span class="ruby-identifier">new_client</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_client</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_client</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_client</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build_many">
            
              <a name="method-i-test_build_many"></a><b>test_build_many</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_many_source')" id="l_method-i-test_build_many_source">show</a>
                
              </p>
              <div id="method-i-test_build_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 682</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build_many</span>
  <span class="ruby-identifier">new_clients</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">build</span>([{<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client&quot;</span>}, {<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client II&quot;</span>}])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">new_clients</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build_without_loading_association">
            
              <a name="method-i-test_build_without_loading_association"></a><b>test_build_without_loading_association</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_without_loading_association_source')" id="l_method-i-test_build_without_loading_association_source">show</a>
                
              </p>
              <div id="method-i-test_build_without_loading_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 690</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build_without_loading_association</span>
  <span class="ruby-identifier">first_topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>)
  <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">column_names</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">first_topic</span>.<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">length</span>
  
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">first_topic</span>.<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Not saved&quot;</span>, <span class="ruby-value">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Superstars&quot;</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">first_topic</span>.<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">first_topic</span>.<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">to_ary</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_clearing_a_dependent_association_collection">
            
              <a name="method-i-test_clearing_a_dependent_association_collection"></a><b>test_clearing_a_dependent_association_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_clearing_a_dependent_association_collection_source')" id="l_method-i-test_clearing_a_dependent_association_collection_source">show</a>
                
              </p>
              <div id="method-i-test_clearing_a_dependent_association_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 810</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_clearing_a_dependent_association_collection</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)
  <span class="ruby-identifier">client_id</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">dependent_clients_of_firm</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">dependent_clients_of_firm</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-comment"># :dependent means destroy is called on each client</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">dependent_clients_of_firm</span>.<span class="ruby-identifier">clear</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">dependent_clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">dependent_clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">client_id</span>], <span class="ruby-constant">Client</span>.<span class="ruby-identifier">destroyed_client_ids</span>[<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">id</span>]

  <span class="ruby-comment"># Should be destroyed since the association is dependent.</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">client_id</span>).<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_clearing_an_association_collection">
            
              <a name="method-i-test_clearing_an_association_collection"></a><b>test_clearing_an_association_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_clearing_an_association_collection_source')" id="l_method-i-test_clearing_an_association_collection_source">show</a>
                
              </p>
              <div id="method-i-test_clearing_an_association_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 793</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_clearing_an_association_collection</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)
  <span class="ruby-identifier">client_id</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">clear</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Client</span>.<span class="ruby-identifier">destroyed_client_ids</span>[<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">id</span>]

  <span class="ruby-comment"># Should not be destroyed since the association is not dependent.</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">client_id</span>).<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_clearing_an_exclusively_dependent_association_collection">
            
              <a name="method-i-test_clearing_an_exclusively_dependent_association_collection"></a><b>test_clearing_an_exclusively_dependent_association_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_clearing_an_exclusively_dependent_association_collection_source')" id="l_method-i-test_clearing_an_exclusively_dependent_association_collection_source">show</a>
                
              </p>
              <div id="method-i-test_clearing_an_exclusively_dependent_association_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 826</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_clearing_an_exclusively_dependent_association_collection</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)
  <span class="ruby-identifier">client_id</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">exclusively_dependent_clients_of_firm</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">exclusively_dependent_clients_of_firm</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Client</span>.<span class="ruby-identifier">destroyed_client_ids</span>[<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">id</span>]

  <span class="ruby-comment"># :exclusively_dependent means each client is deleted directly from</span>
  <span class="ruby-comment"># the database without looping through them calling destroy.</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">exclusively_dependent_clients_of_firm</span>.<span class="ruby-identifier">clear</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">exclusively_dependent_clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">exclusively_dependent_clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">3</span>], <span class="ruby-constant">Client</span>.<span class="ruby-identifier">destroyed_client_ids</span>[<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">id</span>]

  <span class="ruby-comment"># Should be destroyed since the association is exclusively dependent.</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">client_id</span>).<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_clearing_without_initial_access">
            
              <a name="method-i-test_clearing_without_initial_access"></a><b>test_clearing_without_initial_access</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_clearing_without_initial_access_source')" id="l_method-i-test_clearing_without_initial_access_source">show</a>
                
              </p>
              <div id="method-i-test_clearing_without_initial_access_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 845</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_clearing_without_initial_access</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)

  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">clear</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_counting">
            
              <a name="method-i-test_counting"></a><b>test_counting</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_counting_source')" id="l_method-i-test_counting_source">show</a>
                
              </p>
              <div id="method-i-test_counting_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 434</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_counting</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_counting_non_existant_items_using_sql">
            
              <a name="method-i-test_counting_non_existant_items_using_sql"></a><b>test_counting_non_existant_items_using_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_counting_non_existant_items_using_sql_source')" id="l_method-i-test_counting_non_existant_items_using_sql_source">show</a>
                
              </p>
              <div id="method-i-test_counting_non_existant_items_using_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 501</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_counting_non_existant_items_using_sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">no_clients_using_counter_sql</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_counting_using_sql">
            
              <a name="method-i-test_counting_using_sql"></a><b>test_counting_using_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_counting_using_sql_source')" id="l_method-i-test_counting_using_sql_source">show</a>
                
              </p>
              <div id="method-i-test_counting_using_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 496</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_counting_using_sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients_using_counter_sql</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients_using_zero_counter_sql</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_counting_with_column_name_and_hash">
            
              <a name="method-i-test_counting_with_column_name_and_hash"></a><b>test_counting_with_column_name_and_hash</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_counting_with_column_name_and_hash_source')" id="l_method-i-test_counting_with_column_name_and_hash_source">show</a>
                
              </p>
              <div id="method-i-test_counting_with_column_name_and_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 448</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_counting_with_column_name_and_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1=1'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_counting_with_counter_sql">
            
              <a name="method-i-test_counting_with_counter_sql"></a><b>test_counting_with_counter_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_counting_with_counter_sql_source')" id="l_method-i-test_counting_with_counter_sql_source">show</a>
                
              </p>
              <div id="method-i-test_counting_with_counter_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_counting_with_counter_sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_counting_with_single_conditions">
            
              <a name="method-i-test_counting_with_single_conditions"></a><b>test_counting_with_single_conditions</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_counting_with_single_conditions_source')" id="l_method-i-test_counting_with_single_conditions_source">show</a>
                
              </p>
              <div id="method-i-test_counting_with_single_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 438</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_counting_with_single_conditions</span>
  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-string">'count'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">count</span>(<span class="ruby-string">'1=1'</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_counting_with_single_hash">
            
              <a name="method-i-test_counting_with_single_hash"></a><b>test_counting_with_single_hash</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_counting_with_single_hash_source')" id="l_method-i-test_counting_with_single_hash_source">show</a>
                
              </p>
              <div id="method-i-test_counting_with_single_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 444</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_counting_with_single_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1=1'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create">
            
              <a name="method-i-test_create"></a><b>test_create</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_source')" id="l_method-i-test_create_source">show</a>
                
              </p>
              <div id="method-i-test_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 729</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">new_client</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_client</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_client</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_client</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_many">
            
              <a name="method-i-test_create_many"></a><b>test_create_many</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_many_source')" id="l_method-i-test_create_many_source">show</a>
                
              </p>
              <div id="method-i-test_create_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 737</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_many</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">create</span>([{<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client&quot;</span>}, {<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client II&quot;</span>}])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_without_loading_association">
            
              <a name="method-i-test_create_without_loading_association"></a><b>test_create_without_loading_association</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_without_loading_association_source')" id="l_method-i-test_create_without_loading_association_source">show</a>
                
              </p>
              <div id="method-i-test_create_without_loading_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 704</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_without_loading_association</span>
  <span class="ruby-identifier">first_firm</span>  = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)
  <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">column_names</span>
  <span class="ruby-constant">Client</span>.<span class="ruby-identifier">column_names</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">first_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">first_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">reset</span>
  
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">first_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Superstars&quot;</span>)
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">first_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all">
            
              <a name="method-i-test_delete_all"></a><b>test_delete_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_source')" id="l_method-i-test_delete_all_source">show</a>
                
              </p>
              <div id="method-i-test_delete_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 774</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">delete_all</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all_with_not_yet_loaded_association_collection">
            
              <a name="method-i-test_delete_all_with_not_yet_loaded_association_collection"></a><b>test_delete_all_with_not_yet_loaded_association_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_with_not_yet_loaded_association_collection_source')" id="l_method-i-test_delete_all_with_not_yet_loaded_association_collection_source">show</a>
                
              </p>
              <div id="method-i-test_delete_all_with_not_yet_loaded_association_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 783</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all_with_not_yet_loaded_association_collection</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">reset</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">delete_all</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting">
            
              <a name="method-i-test_deleting"></a><b>test_deleting</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_source')" id="l_method-i-test_deleting_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 750</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">first</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_a_collection">
            
              <a name="method-i-test_deleting_a_collection"></a><b>test_deleting_a_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_a_collection_source')" id="l_method-i-test_deleting_a_collection_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_a_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 765</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_a_collection</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">delete</span>([<span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>[<span class="ruby-number">0</span>], <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>[<span class="ruby-number">1</span>]])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_a_item_which_is_not_in_the_collection">
            
              <a name="method-i-test_deleting_a_item_which_is_not_in_the_collection"></a><b>test_deleting_a_item_which_is_not_in_the_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_a_item_which_is_not_in_the_collection_source')" id="l_method-i-test_deleting_a_item_which_is_not_in_the_collection_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_a_item_which_is_not_in_the_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 854</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_a_item_which_is_not_in_the_collection</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">summit</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">'Summit'</span>)
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">summit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">summit</span>.<span class="ruby-identifier">client_of</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_before_save">
            
              <a name="method-i-test_deleting_before_save"></a><b>test_deleting_before_save</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_before_save_source')" id="l_method-i-test_deleting_before_save_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_before_save_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 757</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_before_save</span>
  <span class="ruby-identifier">new_firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;A New Firm, Inc.&quot;</span>)
  <span class="ruby-identifier">new_client</span> = <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">build</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another Client&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">new_client</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_self_type_mismatch">
            
              <a name="method-i-test_deleting_self_type_mismatch"></a><b>test_deleting_self_type_mismatch</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_self_type_mismatch_source')" id="l_method-i-test_deleting_self_type_mismatch_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_self_type_mismatch_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 869</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_self_type_mismatch</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">developers</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_type_mismatch">
            
              <a name="method-i-test_deleting_type_mismatch"></a><b>test_deleting_type_mismatch</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_type_mismatch_source')" id="l_method-i-test_deleting_type_mismatch_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_type_mismatch_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 863</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_type_mismatch</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-number">1</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dependence">
            
              <a name="method-i-test_dependence"></a><b>test_dependence</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dependence_source')" id="l_method-i-test_dependence_source">show</a>
                
              </p>
              <div id="method-i-test_dependence_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 883</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dependence</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">destroy</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;firm_id=#{firm.id}&quot;</span>).<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dependence_on_account">
            
              <a name="method-i-test_dependence_on_account"></a><b>test_dependence_on_account</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dependence_on_account_source')" id="l_method-i-test_dependence_on_account_source">show</a>
                
              </p>
              <div id="method-i-test_dependence_on_account_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 922</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dependence_on_account</span>
  <span class="ruby-identifier">num_accounts</span> = <span class="ruby-constant">Account</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">destroy</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">num_accounts</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Account</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dependence_with_transaction_support_on_failure">
            
              <a name="method-i-test_dependence_with_transaction_support_on_failure"></a><b>test_dependence_with_transaction_support_on_failure</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dependence_with_transaction_support_on_failure_source')" id="l_method-i-test_dependence_with_transaction_support_on_failure_source">show</a>
                
              </p>
              <div id="method-i-test_dependence_with_transaction_support_on_failure_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 911</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dependence_with_transaction_support_on_failure</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)
  <span class="ruby-identifier">clients</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">clients</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">clients</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_destroy</span>() <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Trigger rollback&quot;</span> <span class="ruby-keyword">end</span> }

  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">destroy</span> <span class="ruby-keyword">rescue</span> <span class="ruby-string">&quot;do nothing&quot;</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;firm_id=#{firm.id}&quot;</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_depends_and_nullify">
            
              <a name="method-i-test_depends_and_nullify"></a><b>test_depends_and_nullify</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_depends_and_nullify_source')" id="l_method-i-test_depends_and_nullify_source">show</a>
                
              </p>
              <div id="method-i-test_depends_and_nullify_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 928</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_depends_and_nullify</span>
  <span class="ruby-identifier">num_accounts</span> = <span class="ruby-constant">Account</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">num_companies</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">count</span>
  
  <span class="ruby-identifier">core</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:rails_core</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">accounts</span>(<span class="ruby-value">:rails_core_account</span>), <span class="ruby-identifier">core</span>.<span class="ruby-identifier">account</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">companies</span>(<span class="ruby-value">:leetsoft</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-value">:jadedpixel</span>)], <span class="ruby-identifier">core</span>.<span class="ruby-identifier">companies</span>
  <span class="ruby-identifier">core</span>.<span class="ruby-identifier">destroy</span>                                         
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">accounts</span>(<span class="ruby-value">:rails_core_account</span>).<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">firm_id</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:leetsoft</span>).<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">client_of</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:jadedpixel</span>).<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">client_of</span>
  
  
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">num_accounts</span>, <span class="ruby-constant">Account</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroy_all">
            
              <a name="method-i-test_destroy_all"></a><b>test_destroy_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroy_all_source')" id="l_method-i-test_destroy_all_source">show</a>
                
              </p>
              <div id="method-i-test_destroy_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 875</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroy_all</span>
  <span class="ruby-identifier">force_signal37_to_load_all_clients_of_firm</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">empty?</span>, <span class="ruby-string">&quot;37signals has clients after load&quot;</span>
  <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">destroy_all</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">empty?</span>, <span class="ruby-string">&quot;37signals has no clients after destroy all&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">empty?</span>, <span class="ruby-string">&quot;37signals has no clients after destroy all and refresh&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroy_dependent_when_deleted_from_association">
            
              <a name="method-i-test_destroy_dependent_when_deleted_from_association"></a><b>test_destroy_dependent_when_deleted_from_association</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroy_dependent_when_deleted_from_association_source')" id="l_method-i-test_destroy_dependent_when_deleted_from_association_source">show</a>
                
              </p>
              <div id="method-i-test_destroy_dependent_when_deleted_from_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 890</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroy_dependent_when_deleted_from_association</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">client</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">client</span>)

  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">client</span>.<span class="ruby-identifier">id</span>) }
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">client</span>.<span class="ruby-identifier">id</span>) }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all">
            
              <a name="method-i-test_find_all"></a><b>test_find_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_source')" id="l_method-i-test_find_all_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 539</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all</span>
  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-string">'find_all'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find_first</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find_all</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{QUOTED_TYPE} = 'Client'&quot;</span>).<span class="ruby-identifier">length</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name = 'Summit'&quot;</span>).<span class="ruby-identifier">length</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_sanitized">
            
              <a name="method-i-test_find_all_sanitized"></a><b>test_find_all_sanitized</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_sanitized_source')" id="l_method-i-test_find_all_sanitized_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_sanitized_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 548</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_sanitized</span>
  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-string">'find_all'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find_first</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find_all</span>(<span class="ruby-string">&quot;name = 'Summit'&quot;</span>), <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find_all</span>([<span class="ruby-string">&quot;name = '%s'&quot;</span>, <span class="ruby-string">&quot;Summit&quot;</span>])
    <span class="ruby-identifier">summit</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name = 'Summit'&quot;</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">summit</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">&quot;name = ?&quot;</span>, <span class="ruby-string">&quot;Summit&quot;</span>])
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">summit</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">&quot;name = :name&quot;</span>, { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Summit&quot;</span> }])
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_without_conditions">
            
              <a name="method-i-test_find_all_without_conditions"></a><b>test_find_all_without_conditions</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_without_conditions_source')" id="l_method-i-test_find_all_without_conditions_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_without_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 952</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_without_conditions</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>).<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_first">
            
              <a name="method-i-test_find_first"></a><b>test_find_first</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_first_source')" id="l_method-i-test_find_first_source">show</a>
                
              </p>
              <div id="method-i-test_find_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 558</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_first</span>
  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-string">'find_first'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find_first</span>
    <span class="ruby-identifier">client2</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find_first</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">client2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find_first</span>(<span class="ruby-node">&quot;#{QUOTED_TYPE} = 'Client'&quot;</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">client2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{QUOTED_TYPE} = 'Client'&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_first_sanitized">
            
              <a name="method-i-test_find_first_sanitized"></a><b>test_find_first_sanitized</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_first_sanitized_source')" id="l_method-i-test_find_first_sanitized_source">show</a>
                
              </p>
              <div id="method-i-test_find_first_sanitized_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 568</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_first_sanitized</span>
  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-string">'find_first'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find_first</span>
    <span class="ruby-identifier">client2</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
    <span class="ruby-identifier">assert_deprecated</span>(<span class="ruby-regexp">%rfind_first/</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">client2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find_first</span>([<span class="ruby-node">&quot;#{QUOTED_TYPE} = ?&quot;</span>, <span class="ruby-string">&quot;Client&quot;</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">client2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;#{QUOTED_TYPE} = ?&quot;</span>, <span class="ruby-string">'Client'</span>])
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">client2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;#{QUOTED_TYPE} = :type&quot;</span>, { <span class="ruby-value">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Client'</span> }])
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_grouped">
            
              <a name="method-i-test_find_grouped"></a><b>test_find_grouped</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_grouped_source')" id="l_method-i-test_find_grouped_source">show</a>
                
              </p>
              <div id="method-i-test_find_grouped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 585</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_grouped</span>
  <span class="ruby-identifier">all_clients_of_firm1</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;firm_id = 1&quot;</span>)
  <span class="ruby-identifier">grouped_clients_of_firm1</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;firm_id = 1&quot;</span>, <span class="ruby-value">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;firm_id&quot;</span>, <span class="ruby-value">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'firm_id, count(id) as clients_count'</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">all_clients_of_firm1</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">grouped_clients_of_firm1</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_ids">
            
              <a name="method-i-test_find_ids"></a><b>test_find_ids</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_ids_source')" id="l_method-i-test_find_ids_source">show</a>
                
              </p>
              <div id="method-i-test_find_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 519</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_ids</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span> }

  <span class="ruby-identifier">client</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Client</span>, <span class="ruby-identifier">client</span>

  <span class="ruby-identifier">client_ary</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>([<span class="ruby-number">2</span>])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">client_ary</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">client</span>, <span class="ruby-identifier">client_ary</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">client_ary</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>, <span class="ruby-number">3</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">client_ary</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">client_ary</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">client</span>, <span class="ruby-identifier">client_ary</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>, <span class="ruby-number">99</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_collection">
            
              <a name="method-i-test_find_in_collection"></a><b>test_find_in_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_collection_source')" id="l_method-i-test_find_in_collection_source">show</a>
                
              </p>
              <div id="method-i-test_find_in_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 580</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_collection</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">6</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_many_with_merged_options">
            
              <a name="method-i-test_find_many_with_merged_options"></a><b>test_find_many_with_merged_options</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_many_with_merged_options_source')" id="l_method-i-test_find_many_with_merged_options_source">show</a>
                
              </p>
              <div id="method-i-test_find_many_with_merged_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 456</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_many_with_merged_options</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">limited_clients</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">limited_clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">limited_clients</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_create">
            
              <a name="method-i-test_find_or_create"></a><b>test_find_or_create</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_create_source')" id="l_method-i-test_find_or_create_source">show</a>
                
              </p>
              <div id="method-i-test_find_or_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 742</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_create</span>
  <span class="ruby-identifier">number_of_clients</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">the_client</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-string">&quot;Yet another client&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">number_of_clients</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>, <span class="ruby-value">:refresh</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">the_client</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-string">&quot;Yet another client&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">number_of_clients</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>, <span class="ruby-value">:refresh</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding">
            
              <a name="method-i-test_finding"></a><b>test_finding</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_source')" id="l_method-i-test_finding_source">show</a>
                
              </p>
              <div id="method-i-test_finding_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 452</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_default_orders">
            
              <a name="method-i-test_finding_default_orders"></a><b>test_finding_default_orders</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_default_orders_source')" id="l_method-i-test_finding_default_orders_source">show</a>
                
              </p>
              <div id="method-i-test_finding_default_orders_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 467</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_default_orders</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Summit&quot;</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_using_sql">
            
              <a name="method-i-test_finding_using_sql"></a><b>test_finding_using_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_using_sql_source')" id="l_method-i-test_finding_using_sql_source">show</a>
                
              </p>
              <div id="method-i-test_finding_using_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 487</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_using_sql</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
  <span class="ruby-identifier">first_client</span> = <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_using_sql</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">first_client</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Microsoft&quot;</span>, <span class="ruby-identifier">first_client</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_using_sql</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients_using_sql</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_condition">
            
              <a name="method-i-test_finding_with_condition"></a><b>test_finding_with_condition</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_condition_source')" id="l_method-i-test_finding_with_condition_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_condition_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 479</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_condition</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Microsoft&quot;</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients_like_ms</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_condition_hash">
            
              <a name="method-i-test_finding_with_condition_hash"></a><b>test_finding_with_condition_hash</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_condition_hash_source')" id="l_method-i-test_finding_with_condition_hash_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_condition_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 483</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_condition_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Microsoft&quot;</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients_like_ms_with_hash_conditions</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_different_class_name_and_order">
            
              <a name="method-i-test_finding_with_different_class_name_and_order"></a><b>test_finding_with_different_class_name_and_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_different_class_name_and_order_source')" id="l_method-i-test_finding_with_different_class_name_and_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_different_class_name_and_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 471</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_different_class_name_and_order</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Microsoft&quot;</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients_sorted_desc</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_foreign_key">
            
              <a name="method-i-test_finding_with_foreign_key"></a><b>test_finding_with_foreign_key</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_foreign_key_source')" id="l_method-i-test_finding_with_foreign_key_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_foreign_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 475</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_foreign_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Microsoft&quot;</span>, <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_get_ids">
            
              <a name="method-i-test_get_ids"></a><b>test_get_ids</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_get_ids_source')" id="l_method-i-test_get_ids_source">show</a>
                
              </p>
              <div id="method-i-test_get_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 985</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_get_ids</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_client</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>).<span class="ruby-identifier">id</span>], <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">client_ids</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_included_in_collection">
            
              <a name="method-i-test_included_in_collection"></a><b>test_included_in_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_included_in_collection_source')" id="l_method-i-test_included_in_collection_source">show</a>
                
              </p>
              <div id="method-i-test_included_in_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 944</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_included_in_collection</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_invalid_adding">
            
              <a name="method-i-test_invalid_adding"></a><b>test_invalid_adding</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_invalid_adding_source')" id="l_method-i-test_invalid_adding_source">show</a>
                
              </p>
              <div id="method-i-test_invalid_adding_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 650</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_invalid_adding</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_of_firm</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">c</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">firm</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">firm</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_invalid_adding_before_save">
            
              <a name="method-i-test_invalid_adding_before_save"></a><b>test_invalid_adding_before_save</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_invalid_adding_before_save_source')" id="l_method-i-test_invalid_adding_before_save_source">show</a>
                
              </p>
              <div id="method-i-test_invalid_adding_before_save_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 659</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_invalid_adding_before_save</span>
  <span class="ruby-identifier">no_of_firms</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">no_of_clients</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">new_firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;A New Firm, Inc&quot;</span>)
  <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-identifier">c</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Apple&quot;</span>)])
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_firm</span>.<span class="ruby-identifier">new_record?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_invalid_build">
            
              <a name="method-i-test_invalid_build"></a><b>test_invalid_build</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_invalid_build_source')" id="l_method-i-test_invalid_build_source">show</a>
                
              </p>
              <div id="method-i-test_invalid_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 719</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_invalid_build</span>
  <span class="ruby-identifier">new_client</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">build</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_client</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_client</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_client</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_client</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">clients_of_firm</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_regular_create_on_has_many_when_parent_is_new_raises">
            
              <a name="method-i-test_regular_create_on_has_many_when_parent_is_new_raises"></a><b>test_regular_create_on_has_many_when_parent_is_new_raises</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_regular_create_on_has_many_when_parent_is_new_raises_source')" id="l_method-i-test_regular_create_on_has_many_when_parent_is_new_raises_source">show</a>
                
              </p>
              <div id="method-i-test_regular_create_on_has_many_when_parent_is_new_raises_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 609</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_regular_create_on_has_many_when_parent_is_new_raises</span>
  <span class="ruby-identifier">assert_deprecated</span>(<span class="ruby-regexp">%r.build instead/</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">plain_clients</span>.<span class="ruby-identifier">create</span> <span class="ruby-value">:name=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;Whoever&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_on_new_object">
            
              <a name="method-i-test_replace_on_new_object"></a><b>test_replace_on_new_object</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_on_new_object_source')" id="l_method-i-test_replace_on_new_object_source">show</a>
                
              </p>
              <div id="method-i-test_replace_on_new_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 976</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_on_new_object</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;New Firm&quot;</span>)
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span> = [<span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>), <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;New Client&quot;</span>)]
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Client</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&quot;New Client&quot;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_with_less">
            
              <a name="method-i-test_replace_with_less"></a><b>test_replace_with_less</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_with_less_source')" id="l_method-i-test_replace_with_less_source">show</a>
                
              </p>
              <div id="method-i-test_replace_with_less_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 957</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_with_less</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span> = [<span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_client</span>)]
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">save</span>, <span class="ruby-string">&quot;Could not save firm&quot;</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_with_new">
            
              <a name="method-i-test_replace_with_new"></a><b>test_replace_with_new</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_with_new_source')" id="l_method-i-test_replace_with_new_source">show</a>
                
              </p>
              <div id="method-i-test_replace_with_new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 966</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_with_new</span>
  <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
  <span class="ruby-identifier">new_client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;New Client&quot;</span>)
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span> = [<span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>),<span class="ruby-identifier">new_client</span>]
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:first_client</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_three_levels_of_dependence">
            
              <a name="method-i-test_three_levels_of_dependence"></a><b>test_three_levels_of_dependence</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_three_levels_of_dependence_source')" id="l_method-i-test_three_levels_of_dependence_source">show</a>
                
              </p>
              <div id="method-i-test_three_levels_of_dependence_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 902</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_three_levels_of_dependence</span>
  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span> <span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;neat and simple&quot;</span>
  <span class="ruby-identifier">reply</span> = <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">create</span> <span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;neat and simple&quot;</span>, <span class="ruby-string">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;still digging it&quot;</span>
  <span class="ruby-identifier">silly_reply</span> = <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">create</span> <span class="ruby-string">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;neat and simple&quot;</span>, <span class="ruby-string">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ain't complaining&quot;</span>
  
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">destroy</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_triple_equality">
            
              <a name="method-i-test_triple_equality"></a><b>test_triple_equality</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_triple_equality_source')" id="l_method-i-test_triple_equality_source">show</a>
                
              </p>
              <div id="method-i-test_triple_equality_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/test/associations_test.rb, line 462</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_triple_equality</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">clients</span> <span class="ruby-operator">===</span> <span class="ruby-constant">Array</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    