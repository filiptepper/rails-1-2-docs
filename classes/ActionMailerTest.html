<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActionMailerTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            ActionMailerTest 
            
                <span class="parent">&lt; 
                    
                    Test::Unit::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/rails/actionmailer/test/mail_service_test_rb.html">rails/actionmailer/test/mail_service_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-encode">encode</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-new_mail">new_mail</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup">setup</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_attachment_using_content_location">test_attachment_using_content_location</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attachment_with_custom_header">test_attachment_with_custom_header</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attachment_with_text_type">test_attachment_with_text_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cancelled_account">test_cancelled_account</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cc_bcc">test_cc_bcc</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_custom_content_type_attributes">test_custom_content_type_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_custom_template">test_custom_template</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_attachment_without_charset">test_decode_attachment_without_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_encoded_attachment_filename">test_decode_encoded_attachment_filename</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_message_with_incorrect_charset">test_decode_message_with_incorrect_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_message_with_unknown_charset">test_decode_message_with_unknown_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_message_with_unquoted_atchar_in_header">test_decode_message_with_unquoted_atchar_in_header</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_message_without_content_type">test_decode_message_without_content_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_part_without_content_type">test_decode_part_without_content_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deliver_with_mail_object">test_deliver_with_mail_object</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deliveries_array">test_deliveries_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deprecated_server_settings">test_deprecated_server_settings</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_header_values_omitted">test_empty_header_values_omitted</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicitly_multipart_messages">test_explicitly_multipart_messages</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicitly_multipart_with_content_type">test_explicitly_multipart_with_content_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicitly_multipart_with_invalid_content_type">test_explicitly_multipart_with_invalid_content_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_extended_headers">test_extended_headers</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_headers_removed_on_smtp_delivery">test_headers_removed_on_smtp_delivery</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_headers_with_nonalpha_chars">test_headers_with_nonalpha_chars</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_html_mail">test_html_mail</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_html_mail_with_underscores">test_html_mail_with_underscores</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implicitly_multipart_messages">test_implicitly_multipart_messages</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implicitly_multipart_messages_with_charset">test_implicitly_multipart_messages_with_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implicitly_multipart_messages_with_custom_order">test_implicitly_multipart_messages_with_custom_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implicitly_multipart_with_utf8">test_implicitly_multipart_with_utf8</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_instances_are_nil">test_instances_are_nil</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_iso_charset">test_iso_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multipart_with_mime_version">test_multipart_with_mime_version</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multipart_with_template_path_with_dots">test_multipart_with_template_path_with_dots</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multipart_with_utf8_subject">test_multipart_with_utf8_subject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multiple_utf8_recipients">test_multiple_utf8_recipients</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_nested_parts">test_nested_parts</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_perform_deliveries_flag">test_perform_deliveries_flag</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_receive_attachments">test_receive_attachments</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_receive_decodes_base64_encoded_mail">test_receive_decodes_base64_encoded_mail</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_recursive_multipart_processing">test_recursive_multipart_processing</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_up">test_signed_up</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unencoded_subject">test_unencoded_subject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_7bit_body">test_unquote_7bit_body</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_7bit_subject">test_unquote_7bit_subject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_base64_body">test_unquote_base64_body</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_quoted_printable_body">test_unquote_quoted_printable_body</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_quoted_printable_subject">test_unquote_quoted_printable_subject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_utf8_body_is_not_quoted">test_utf8_body_is_not_quoted</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_various_newlines">test_various_newlines</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_various_newlines_multipart">test_various_newlines_multipart</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_wrong_mail_header">test_wrong_mail_header</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-encode">
            
              <a name="method-i-encode"></a><b>encode</b>( text, charset=&quot;utf-8&quot; )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-encode_source')" id="l_method-i-encode_source">show</a>
                
              </p>
              <div id="method-i-encode_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">encode</span>( <span class="ruby-identifier">text</span>, <span class="ruby-identifier">charset</span>=<span class="ruby-string">&quot;utf-8&quot;</span> )
  <span class="ruby-identifier">quoted_printable</span>( <span class="ruby-identifier">text</span>, <span class="ruby-identifier">charset</span> )
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-new_mail">
            
              <a name="method-i-new_mail"></a><b>new_mail</b>( charset=&quot;utf-8&quot; )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-new_mail_source')" id="l_method-i-new_mail_source">show</a>
                
              </p>
              <div id="method-i-new_mail_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 255</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">new_mail</span>( <span class="ruby-identifier">charset</span>=<span class="ruby-string">&quot;utf-8&quot;</span> )
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span> = <span class="ruby-string">&quot;1.0&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">charset</span>
    <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">set_content_type</span> <span class="ruby-string">&quot;text&quot;</span>, <span class="ruby-string">&quot;plain&quot;</span>, { <span class="ruby-string">&quot;charset&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">charset</span> }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">mail</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup">
            
              <a name="method-i-setup"></a><b>setup</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_source')" id="l_method-i-setup_source">show</a>
                
              </p>
              <div id="method-i-setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:test</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span> = []

  <span class="ruby-ivar">@recipient</span> = <span class="ruby-string">'test@localhost'</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attachment_using_content_location">
            
              <a name="method-i-test_attachment_using_content_location"></a><b>test_attachment_using_content_location</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attachment_using_content_location_source')" id="l_method-i-test_attachment_using_content_location_source">show</a>
                
              </p>
              <div id="method-i-test_attachment_using_content_location_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 587</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attachment_using_content_location</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email12&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Photo25.jpg&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">original_filename</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attachment_with_custom_header">
            
              <a name="method-i-test_attachment_with_custom_header"></a><b>test_attachment_with_custom_header</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attachment_with_custom_header_source')" id="l_method-i-test_attachment_with_custom_header_source">show</a>
                
              </p>
              <div id="method-i-test_attachment_with_custom_header_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attachment_with_custom_header</span>
  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_attachment_with_custom_header</span>(<span class="ruby-ivar">@recipient</span>)}
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;&lt;test@test.com&gt;&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">header</span>[<span class="ruby-string">'content-id'</span>].<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attachment_with_text_type">
            
              <a name="method-i-test_attachment_with_text_type"></a><b>test_attachment_with_text_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attachment_with_text_type_source')" id="l_method-i-test_attachment_with_text_type_source">show</a>
                
              </p>
              <div id="method-i-test_attachment_with_text_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 594</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attachment_with_text_type</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email13&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">has_attachments?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;hello.rb&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">original_filename</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cancelled_account">
            
              <a name="method-i-test_cancelled_account"></a><b>test_cancelled_account</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cancelled_account_source')" id="l_method-i-test_cancelled_account_source">show</a>
                
              </p>
              <div id="method-i-test_cancelled_account_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 324</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cancelled_account</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-node">&quot;[Cancelled] Goodbye #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-node">&quot;Goodbye, Mr. #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>)

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_cancelled_account</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_cancelled_account</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cc_bcc">
            
              <a name="method-i-test_cc_bcc"></a><b>test_cc_bcc</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cc_bcc_source')" id="l_method-i-test_cc_bcc_source">show</a>
                
              </p>
              <div id="method-i-test_cc_bcc_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 342</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cc_bcc</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing bcc/cc&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-string">&quot;nobody@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-string">&quot;root@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_cc_bcc</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_cc_bcc</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_custom_content_type_attributes">
            
              <a name="method-i-test_custom_content_type_attributes"></a><b>test_custom_content_type_attributes</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_custom_content_type_attributes_source')" id="l_method-i-test_custom_content_type_attributes_source">show</a>
                
              </p>
              <div id="method-i-test_custom_content_type_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 785</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_custom_content_type_attributes</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_custom_content_type_attributes</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{format=flowed}</span>, <span class="ruby-identifier">mail</span>[<span class="ruby-string">'content-type'</span>].<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{charset=utf-8}</span>, <span class="ruby-identifier">mail</span>[<span class="ruby-string">'content-type'</span>].<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_custom_template">
            
              <a name="method-i-test_custom_template"></a><b>test_custom_template</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_custom_template_source')" id="l_method-i-test_custom_template_source">show</a>
                
              </p>
              <div id="method-i-test_custom_template_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 310</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_custom_template</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-node">&quot;[Signed up] Welcome #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-node">&quot;Hello there, \n\nMr. #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>)

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_custom_template</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_attachment_without_charset">
            
              <a name="method-i-test_decode_attachment_without_charset"></a><b>test_decode_attachment_without_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_attachment_without_charset_source')" id="l_method-i-test_decode_attachment_without_charset_source">show</a>
                
              </p>
              <div id="method-i-test_decode_attachment_without_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 580</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_attachment_without_charset</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email3&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">attachment</span> = <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1026</span>, <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">read</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_encoded_attachment_filename">
            
              <a name="method-i-test_decode_encoded_attachment_filename"></a><b>test_decode_encoded_attachment_filename</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_encoded_attachment_filename_source')" id="l_method-i-test_decode_encoded_attachment_filename_source">show</a>
                
              </p>
              <div id="method-i-test_decode_encoded_attachment_filename_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 734</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_encoded_attachment_filename</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email8&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">attachment</span> = <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;01QuienTeDijat.Pitbull.mp3&quot;</span>, <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">original_filename</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_message_with_incorrect_charset">
            
              <a name="method-i-test_decode_message_with_incorrect_charset"></a><b>test_decode_message_with_incorrect_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_message_with_incorrect_charset_source')" id="l_method-i-test_decode_message_with_incorrect_charset_source">show</a>
                
              </p>
              <div id="method-i-test_decode_message_with_incorrect_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 614</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_message_with_incorrect_charset</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email6&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_message_with_unknown_charset">
            
              <a name="method-i-test_decode_message_with_unknown_charset"></a><b>test_decode_message_with_unknown_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_message_with_unknown_charset_source')" id="l_method-i-test_decode_message_with_unknown_charset_source">show</a>
                
              </p>
              <div id="method-i-test_decode_message_with_unknown_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 746</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_message_with_unknown_charset</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email10&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_message_with_unquoted_atchar_in_header">
            
              <a name="method-i-test_decode_message_with_unquoted_atchar_in_header"></a><b>test_decode_message_with_unquoted_atchar_in_header</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_message_with_unquoted_atchar_in_header_source')" id="l_method-i-test_decode_message_with_unquoted_atchar_in_header_source">show</a>
                
              </p>
              <div id="method-i-test_decode_message_with_unquoted_atchar_in_header_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 752</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_message_with_unquoted_atchar_in_header</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email11&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_message_without_content_type">
            
              <a name="method-i-test_decode_message_without_content_type"></a><b>test_decode_message_without_content_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_message_without_content_type_source')" id="l_method-i-test_decode_message_without_content_type_source">show</a>
                
              </p>
              <div id="method-i-test_decode_message_without_content_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 608</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_message_without_content_type</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email5&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_part_without_content_type">
            
              <a name="method-i-test_decode_part_without_content_type"></a><b>test_decode_part_without_content_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_part_without_content_type_source')" id="l_method-i-test_decode_part_without_content_type_source">show</a>
                
              </p>
              <div id="method-i-test_decode_part_without_content_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 602</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_part_without_content_type</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email4&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deliver_with_mail_object">
            
              <a name="method-i-test_deliver_with_mail_object"></a><b>test_deliver_with_mail_object</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deliver_with_mail_object_source')" id="l_method-i-test_deliver_with_mail_object_source">show</a>
                
              </p>
              <div id="method-i-test_deliver_with_mail_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 774</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deliver_with_mail_object</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_headers_with_nonalpha_chars</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver</span>(<span class="ruby-identifier">mail</span>) }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deliveries_array">
            
              <a name="method-i-test_deliveries_array"></a><b>test_deliveries_array</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deliveries_array_source')" id="l_method-i-test_deliveries_array_source">show</a>
                
              </p>
              <div id="method-i-test_deliveries_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 422</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deliveries_array</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_signed_up</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deprecated_server_settings">
            
              <a name="method-i-test_deprecated_server_settings"></a><b>test_deprecated_server_settings</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deprecated_server_settings_source')" id="l_method-i-test_deprecated_server_settings_source">show</a>
                
              </p>
              <div id="method-i-test_deprecated_server_settings_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 791</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deprecated_server_settings</span>
  <span class="ruby-identifier">old_smtp_settings</span> = <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">smtp_settings</span>
  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">server_settings</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">server_settings</span>={}
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">smtp_settings</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">smtp_settings</span>=<span class="ruby-identifier">old_smtp_settings</span>    
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_header_values_omitted">
            
              <a name="method-i-test_empty_header_values_omitted"></a><b>test_empty_header_values_omitted</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_header_values_omitted_source')" id="l_method-i-test_empty_header_values_omitted_source">show</a>
                
              </p>
              <div id="method-i-test_empty_header_values_omitted_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 758</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_header_values_omitted</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_unnamed_attachment</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">encoded</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{Content-Type: application/octet-stream[^;]}</span>, <span class="ruby-identifier">result</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{Content-Disposition: attachment[^;]}</span>, <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicitly_multipart_messages">
            
              <a name="method-i-test_explicitly_multipart_messages"></a><b>test_explicitly_multipart_messages</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicitly_multipart_messages_source')" id="l_method-i-test_explicitly_multipart_messages_source">show</a>
                
              </p>
              <div id="method-i-test_explicitly_multipart_messages_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 635</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicitly_multipart_messages</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_explicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">content_type</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;iso-8859-1&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;charset&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;inline&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">content_disposition</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;image/jpeg&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;attachment&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">content_disposition</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;foo.jpg&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-disposition&quot;</span>, <span class="ruby-string">&quot;filename&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;foo.jpg&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;name&quot;</span>)
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;charset&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicitly_multipart_with_content_type">
            
              <a name="method-i-test_explicitly_multipart_with_content_type"></a><b>test_explicitly_multipart_with_content_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicitly_multipart_with_content_type_source')" id="l_method-i-test_explicitly_multipart_with_content_type_source">show</a>
                
              </p>
              <div id="method-i-test_explicitly_multipart_with_content_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 652</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicitly_multipart_with_content_type</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_explicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;multipart/alternative&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">content_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicitly_multipart_with_invalid_content_type">
            
              <a name="method-i-test_explicitly_multipart_with_invalid_content_type"></a><b>test_explicitly_multipart_with_invalid_content_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicitly_multipart_with_invalid_content_type_source')" id="l_method-i-test_explicitly_multipart_with_invalid_content_type_source">show</a>
                
              </p>
              <div id="method-i-test_explicitly_multipart_with_invalid_content_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 658</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicitly_multipart_with_invalid_content_type</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_explicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;text/xml&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">content_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_extended_headers">
            
              <a name="method-i-test_extended_headers"></a><b>test_extended_headers</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_extended_headers_source')" id="l_method-i-test_extended_headers_source">show</a>
                
              </p>
              <div id="method-i-test_extended_headers_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 507</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_extended_headers</span>
  <span class="ruby-ivar">@recipient</span> = <span class="ruby-string">&quot;Grytyr &lt;test@localhost&gt;&quot;</span>

  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span> <span class="ruby-string">&quot;iso-8859-1&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;iso-8859-1&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing extended headers&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-string">&quot;Grytyr &lt;stian1@example.net&gt;&quot;</span>, <span class="ruby-string">&quot;iso-8859-1&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-string">&quot;Grytyr &lt;stian2@example.net&gt;&quot;</span>, <span class="ruby-string">&quot;iso-8859-1&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-string">&quot;Grytyr &lt;stian3@example.net&gt;&quot;</span>, <span class="ruby-string">&quot;iso-8859-1&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_extended_headers</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_extended_headers</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_headers_removed_on_smtp_delivery">
            
              <a name="method-i-test_headers_removed_on_smtp_delivery"></a><b>test_headers_removed_on_smtp_delivery</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_headers_removed_on_smtp_delivery_source')" id="l_method-i-test_headers_removed_on_smtp_delivery_source">show</a>
                
              </p>
              <div id="method-i-test_headers_removed_on_smtp_delivery_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 717</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_headers_removed_on_smtp_delivery</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_cc_bcc</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">2</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;root@loudthinking.com&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">2</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;nobody@loudthinking.com&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">2</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^Cc: nobody@loudthinking.com}</span>, <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_match</span> <span class="ruby-node">%r{^To: #{@recipient}}</span>, <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp">%r{^Bcc: root@loudthinking.com}</span>, <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">0</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_headers_with_nonalpha_chars">
            
              <a name="method-i-test_headers_with_nonalpha_chars"></a><b>test_headers_with_nonalpha_chars</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_headers_with_nonalpha_chars_source')" id="l_method-i-test_headers_with_nonalpha_chars_source">show</a>
                
              </p>
              <div id="method-i-test_headers_with_nonalpha_chars_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 764</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_headers_with_nonalpha_chars</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_headers_with_nonalpha_chars</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from_addrs</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc_addrs</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc_addrs</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r:/</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from_addrs</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r:/</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc_addrs</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r:/</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc_addrs</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_html_mail">
            
              <a name="method-i-test_html_mail"></a><b>test_html_mail</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_html_mail_source')" id="l_method-i-test_html_mail_source">show</a>
                
              </p>
              <div id="method-i-test_html_mail_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 695</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_html_mail</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_html_mail</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">content_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_html_mail_with_underscores">
            
              <a name="method-i-test_html_mail_with_underscores"></a><b>test_html_mail_with_underscores</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_html_mail_with_underscores_source')" id="l_method-i-test_html_mail_with_underscores_source">show</a>
                
              </p>
              <div id="method-i-test_html_mail_with_underscores_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 700</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_html_mail_with_underscores</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_html_mail_with_underscores</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">%Q{&lt;a href=&quot;http://google.com&quot; target=&quot;_blank&quot;&gt;_Google&lt;/a&gt;}</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implicitly_multipart_messages">
            
              <a name="method-i-test_implicitly_multipart_messages"></a><b>test_implicitly_multipart_messages</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implicitly_multipart_messages_source')" id="l_method-i-test_implicitly_multipart_messages_source">show</a>
                
              </p>
              <div id="method-i-test_implicitly_multipart_messages_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 664</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implicitly_multipart_messages</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_implicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;1.0&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/yaml&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;utf-8&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;charset&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;utf-8&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;charset&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;utf-8&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;charset&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implicitly_multipart_messages_with_charset">
            
              <a name="method-i-test_implicitly_multipart_messages_with_charset"></a><b>test_implicitly_multipart_messages_with_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implicitly_multipart_messages_with_charset_source')" id="l_method-i-test_implicitly_multipart_messages_with_charset_source">show</a>
                
              </p>
              <div id="method-i-test_implicitly_multipart_messages_with_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 685</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implicitly_multipart_messages_with_charset</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_implicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>, <span class="ruby-string">'iso-8859-1'</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">header</span>[<span class="ruby-string">'content-type'</span>].<span class="ruby-identifier">body</span>
  
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'iso-8859-1'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;charset&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'iso-8859-1'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;charset&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'iso-8859-1'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">sub_header</span>(<span class="ruby-string">&quot;content-type&quot;</span>, <span class="ruby-string">&quot;charset&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implicitly_multipart_messages_with_custom_order">
            
              <a name="method-i-test_implicitly_multipart_messages_with_custom_order"></a><b>test_implicitly_multipart_messages_with_custom_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implicitly_multipart_messages_with_custom_order_source')" id="l_method-i-test_implicitly_multipart_messages_with_custom_order_source">show</a>
                
              </p>
              <div id="method-i-test_implicitly_multipart_messages_with_custom_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 677</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implicitly_multipart_messages_with_custom_order</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_implicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>, <span class="ruby-keyword">nil</span>, [<span class="ruby-string">&quot;text/yaml&quot;</span>, <span class="ruby-string">&quot;text/plain&quot;</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/yaml&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">content_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implicitly_multipart_with_utf8">
            
              <a name="method-i-test_implicitly_multipart_with_utf8"></a><b>test_implicitly_multipart_with_utf8</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implicitly_multipart_with_utf8_source')" id="l_method-i-test_implicitly_multipart_with_utf8_source">show</a>
                
              </p>
              <div id="method-i-test_implicitly_multipart_with_utf8_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 630</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implicitly_multipart_with_utf8</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_implicitly_multipart_with_utf8</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r\nSubject: =\?utf-8\?Q\?Foo_.*?\?=/</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">encoded</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_instances_are_nil">
            
              <a name="method-i-test_instances_are_nil"></a><b>test_instances_are_nil</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_instances_are_nil_source')" id="l_method-i-test_instances_are_nil_source">show</a>
                
              </p>
              <div id="method-i-test_instances_are_nil_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_instances_are_nil</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_iso_charset">
            
              <a name="method-i-test_iso_charset"></a><b>test_iso_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_iso_charset_source')" id="l_method-i-test_iso_charset_source">show</a>
                
              </p>
              <div id="method-i-test_iso_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_iso_charset</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>( <span class="ruby-string">&quot;iso-8859-1&quot;</span> )
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-identifier">encode</span> <span class="ruby-string">&quot;testing is charsets&quot;</span>, <span class="ruby-string">&quot;iso-8859-1&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-string">&quot;nobody@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-string">&quot;root@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_iso_charset</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_iso_charset</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multipart_with_mime_version">
            
              <a name="method-i-test_multipart_with_mime_version"></a><b>test_multipart_with_mime_version</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multipart_with_mime_version_source')" id="l_method-i-test_multipart_with_mime_version_source">show</a>
                
              </p>
              <div id="method-i-test_multipart_with_mime_version_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 620</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multipart_with_mime_version</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_multipart_with_mime_version</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;1.1&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multipart_with_template_path_with_dots">
            
              <a name="method-i-test_multipart_with_template_path_with_dots"></a><b>test_multipart_with_template_path_with_dots</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multipart_with_template_path_with_dots_source')" id="l_method-i-test_multipart_with_template_path_with_dots_source">show</a>
                
              </p>
              <div id="method-i-test_multipart_with_template_path_with_dots_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 780</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multipart_with_template_path_with_dots</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">FunkyPathMailer</span>.<span class="ruby-identifier">create_multipart_with_template_path_with_dots</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multipart_with_utf8_subject">
            
              <a name="method-i-test_multipart_with_utf8_subject"></a><b>test_multipart_with_utf8_subject</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multipart_with_utf8_subject_source')" id="l_method-i-test_multipart_with_utf8_subject_source">show</a>
                
              </p>
              <div id="method-i-test_multipart_with_utf8_subject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 625</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multipart_with_utf8_subject</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_multipart_with_utf8_subject</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r\nSubject: =\?utf-8\?Q\?Foo_.*?\?=/</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">encoded</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multiple_utf8_recipients">
            
              <a name="method-i-test_multiple_utf8_recipients"></a><b>test_multiple_utf8_recipients</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multiple_utf8_recipients_source')" id="l_method-i-test_multiple_utf8_recipients_source">show</a>
                
              </p>
              <div id="method-i-test_multiple_utf8_recipients_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 550</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multiple_utf8_recipients</span>
  <span class="ruby-ivar">@recipient</span> = [<span class="ruby-string">&quot;\&quot;Foo  \&quot; &lt;extended@example.net&gt;&quot;</span>, <span class="ruby-string">&quot;\&quot;Example Recipient\&quot; &lt;me@example.com&gt;&quot;</span>]
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span> <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing utf-8 body&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot; blah&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>.<span class="ruby-identifier">first</span>, <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_utf8_body</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r\nFrom: =\?utf-8\?Q\?Foo_.*?\?= &lt;extended@example.net&gt;\r/</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r\nTo: =\?utf-8\?Q\?Foo_.*?\?= &lt;extended@example.net&gt;, Example Recipient &lt;me/</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_nested_parts">
            
              <a name="method-i-test_nested_parts"></a><b>test_nested_parts</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_nested_parts_source')" id="l_method-i-test_nested_parts_source">show</a>
                
              </p>
              <div id="method-i-test_nested_parts_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 272</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_nested_parts</span>
  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_nested_multipart</span>(<span class="ruby-ivar">@recipient</span>)}
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>,<span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>,<span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">size</span>
  
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/mixed&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">header</span>[<span class="ruby-string">'foo'</span>].<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;application/octet-stream&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">content_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_perform_deliveries_flag">
            
              <a name="method-i-test_perform_deliveries_flag"></a><b>test_perform_deliveries_flag</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_perform_deliveries_flag_source')" id="l_method-i-test_perform_deliveries_flag_source">show</a>
                
              </p>
              <div id="method-i-test_perform_deliveries_flag_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_perform_deliveries_flag</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_signed_up</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_signed_up</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_receive_attachments">
            
              <a name="method-i-test_receive_attachments"></a><b>test_receive_attachments</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_receive_attachments_source')" id="l_method-i-test_receive_attachments_source">show</a>
                
              </p>
              <div id="method-i-test_receive_attachments_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 572</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_receive_attachments</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email2&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">attachment</span> = <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;smime.p7s&quot;</span>, <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">original_filename</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;application/pkcs7-signature&quot;</span>, <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">content_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_receive_decodes_base64_encoded_mail">
            
              <a name="method-i-test_receive_decodes_base64_encoded_mail"></a><b>test_receive_decodes_base64_encoded_mail</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_receive_decodes_base64_encoded_mail_source')" id="l_method-i-test_receive_decodes_base64_encoded_mail_source">show</a>
                
              </p>
              <div id="method-i-test_receive_decodes_base64_encoded_mail_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 566</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_receive_decodes_base64_encoded_mail</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email&quot;</span>)
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">receive</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%rJamis/</span>, <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">received_body</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_recursive_multipart_processing">
            
              <a name="method-i-test_recursive_multipart_processing"></a><b>test_recursive_multipart_processing</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_recursive_multipart_processing_source')" id="l_method-i-test_recursive_multipart_processing_source">show</a>
                
              </p>
              <div id="method-i-test_recursive_multipart_processing_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 728</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_recursive_multipart_processing</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email7&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;This is the first part.\n\nAttachment: test.rb\nAttachment: test.pdf\n\n\nAttachment: smime.p7s\n&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_up">
            
              <a name="method-i-test_signed_up"></a><b>test_signed_up</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_up_source')" id="l_method-i-test_signed_up_source">show</a>
                
              </p>
              <div id="method-i-test_signed_up_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 292</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_up</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-node">&quot;[Signed up] Welcome #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-node">&quot;Hello there, \n\nMr. #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>)

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_signed_up</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_signed_up</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unencoded_subject">
            
              <a name="method-i-test_unencoded_subject"></a><b>test_unencoded_subject</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unencoded_subject_source')" id="l_method-i-test_unencoded_subject_source">show</a>
                
              </p>
              <div id="method-i-test_unencoded_subject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unencoded_subject</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing unencoded subject&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-string">&quot;nobody@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-string">&quot;root@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_unencoded_subject</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliver_unencoded_subject</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_7bit_body">
            
              <a name="method-i-test_unquote_7bit_body"></a><b>test_unquote_7bit_body</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_7bit_body_source')" id="l_method-i-test_unquote_7bit_body_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_7bit_body_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 465</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_7bit_body</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: subject
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit

The=3Dbody
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The=3Dbody&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">strip</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The=3Dbody&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">quoted_body</span>.<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_7bit_subject">
            
              <a name="method-i-test_unquote_7bit_subject"></a><b>test_unquote_7bit_subject</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_7bit_subject_source')" id="l_method-i-test_unquote_7bit_subject_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_7bit_subject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 452</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_7bit_subject</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: this == working?
Content-Type: text/plain; charset=iso-8859-1

The body
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;this == working?&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;this == working?&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">quoted_subject</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_base64_body">
            
              <a name="method-i-test_unquote_base64_body"></a><b>test_unquote_base64_body</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_base64_body_source')" id="l_method-i-test_unquote_base64_body_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_base64_body_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 493</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_base64_body</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: subject
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: base64

VGhlIGJvZHk=
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The body&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">strip</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;VGhlIGJvZHk=&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">quoted_body</span>.<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_quoted_printable_body">
            
              <a name="method-i-test_unquote_quoted_printable_body"></a><b>test_unquote_quoted_printable_body</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_quoted_printable_body_source')" id="l_method-i-test_unquote_quoted_printable_body_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_quoted_printable_body_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 479</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_quoted_printable_body</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: subject
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

The=3Dbody
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The=body&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">strip</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The=3Dbody&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">quoted_body</span>.<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_quoted_printable_subject">
            
              <a name="method-i-test_unquote_quoted_printable_subject"></a><b>test_unquote_quoted_printable_subject</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_quoted_printable_subject_source')" id="l_method-i-test_unquote_quoted_printable_subject_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_quoted_printable_subject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 439</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_quoted_printable_subject</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: =?utf-8?Q?testing_testing_=D6=A4?=
Content-Type: text/plain; charset=iso-8859-1

The body
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;testing testing \3326\2244&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;=?utf-8?Q?testing_testing_=D6=A4?=&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">quoted_subject</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_utf8_body_is_not_quoted">
            
              <a name="method-i-test_utf8_body_is_not_quoted"></a><b>test_utf8_body_is_not_quoted</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_utf8_body_is_not_quoted_source')" id="l_method-i-test_utf8_body_is_not_quoted_source">show</a>
                
              </p>
              <div id="method-i-test_utf8_body_is_not_quoted_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 535</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_utf8_body_is_not_quoted</span>
  <span class="ruby-ivar">@recipient</span> = <span class="ruby-string">&quot;Foo   &lt;extended@example.net&gt;&quot;</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span> <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing utf-8 body&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot; blah&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-identifier">quote_address_if_necessary</span> <span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;utf-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_utf8_body</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r blah/</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_various_newlines">
            
              <a name="method-i-test_various_newlines"></a><b>test_various_newlines</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_various_newlines_source')" id="l_method-i-test_various_newlines_source">show</a>
                
              </p>
              <div id="method-i-test_various_newlines_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 705</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_various_newlines</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_various_newlines</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;line #1\nline #2\nline #3\nline #4\n\n&quot;</span> <span class="ruby-operator">+</span>
               <span class="ruby-node">&quot;line #5\n\nline#6\n\nline #7&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_various_newlines_multipart">
            
              <a name="method-i-test_various_newlines_multipart"></a><b>test_various_newlines_multipart</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_various_newlines_multipart_source')" id="l_method-i-test_various_newlines_multipart_source">show</a>
                
              </p>
              <div id="method-i-test_various_newlines_multipart_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 711</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_various_newlines_multipart</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">create_various_newlines_multipart</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;line #1\nline #2\nline #3\nline #4\n\n&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">body</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;&lt;p&gt;line #1&lt;/p&gt;\n&lt;p&gt;line #2&lt;/p&gt;\n&lt;p&gt;line #3&lt;/p&gt;\n&lt;p&gt;line #4&lt;/p&gt;\n\n&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_wrong_mail_header">
            
              <a name="method-i-test_wrong_mail_header"></a><b>test_wrong_mail_header</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_wrong_mail_header_source')" id="l_method-i-test_wrong_mail_header_source">show</a>
                
              </p>
              <div id="method-i-test_wrong_mail_header_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/mail_service_test.rb, line 741</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_wrong_mail_header</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/fixtures/raw_email9&quot;</span>)
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>) { <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">fixture</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    